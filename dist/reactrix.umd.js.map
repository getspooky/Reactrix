{"version":3,"file":"reactrix.umd.js","sources":["../src/utils/types.js","../src/common.js","../src/useValidate.js"],"sourcesContent":["// Copyright 2020 the Reactrix authors. All rights reserved. MIT license.\n\n// Check if given argument is null or undefined.\nexport function isNullOrUndefined(value) {\n  return value === null || value === undefined;\n}\n\n// Check if given argument is an empty array.\nexport function isEmptyArray(arr) {\n  return Array.isArray(arr) && arr.length === 0;\n}\n\n// Check if given argument is an object.\nexport const isObject = (obj) =>\n  obj !== null && obj && typeof obj === 'object' && !Array.isArray(obj);\n\n// Check if given argument is a callback function.\nexport function isCallable(fn) {\n  return typeof fn === 'function';\n}\n\n// Check if given argument is a string.\nexport function isString(arr) {\n  return typeof arr === 'string';\n}\n\n// Check if given object has own property.\nexport function isHasOwnProperty(obj, key) {\n  return isObject(obj) && obj.hasOwnProperty(key);\n}\n","// Copyright 2020 the Reactrix authors. All rights reserved. MIT license.\nimport { isHasOwnProperty, isString } from './utils/types';\n\n// Import rules from given path.\nfunction lazy(alias) {\n  const { rules } = require('../config/register-rules.json');\n  if(!rules.hasOwnProperty(alias)) {\n    throw new TypeError(`No such validator '${alias}' exists.`);\n  }\n  const realPath = new String(rules[alias])\n                  .replace('root:', './');\n  return require(realPath);\n}\n\n// validate given input.\nexport function validateRules(input, rules, language = 'en') {\n\n  if(!isHasOwnProperty(input, 'fieldKey')) {\n    input = { fieldKey: 'V' , fieldVal: input };\n  }\n\n  const { fieldKey, fieldVal } = input;\n\n  // list of errors provied by Reactrix.\n  const stackError = [];\n\n  if (!isString(rules)) {\n    throw new TypeError('Rule must be string (see docs)');\n  }\n  // check if the given rule has a value\n  const splitPipe = rules.split('|');\n  // push errors.\n  splitPipe.forEach(rule => {\n      const getRuleExp = lazy(rule);\n      //\n      if(!getRuleExp.default(fieldVal)) {\n        const msgError = getTranslator(rule, language)\n                         .replace('{{input}}', fieldKey);\n        stackError.push(msgError);\n      }\n  });\n\n  return stackError;\n\n}\n\n// translate given validator.\nfunction getTranslator(rule, currentLng) {\n  const { lang } = require('../config/register-lang.json');\n  if(!lang.hasOwnProperty(currentLng)) {\n    throw new TypeError(`Reactrix does not support ${currentLng} yet`);\n  }\n  const { messages } = require(`../locale/${lang[currentLng]}`);\n  return new String(messages[rule]);\n}\n\n// return the error length.\nexport function getStackError(stackError) {\n  return stackError.length;\n}\n\n// example: min:39, max:20.\nexport function hasValue(arr) {\n  return arr.indexOf(':') !== -1;\n}\n\nexport const regex = (type, expr) => (value) => {\n  return expr.test(value);\n}\n\nexport const assertExp = (type, cb) => (value) => {\n  return cb(value);\n};\n","// Copyright 2020 the Reactrix authors. All rights reserved. MIT license.\nimport React, { useState } from 'react';\nimport { validateRules } from './common';\nimport { isObject, isNullOrUndefined } from './utils/types';\n\nexport function useValidate(defaultLanguage = 'en') {\n\n   const [msg, setMsg] = useState([]);\n\n   const setValidator = (data, rules) => {\n\n     if(!isObject(rules) || isNullOrUndefined(rules)) {\n       throw new TypeError('Rules has to return an object (see docs)');\n     }\n\n     // Starts the validation process.\n     for (const [key, value] of Object.entries(rules)) {\n        const message = validateRules(data[key], value, defaultLanguage);\n        // push message state.\n        setMsg(previousState => [...previousState,...message]);\n     }\n\n   };\n\n   return [ msg, setValidator ];\n\n}\n"],"names":["isNullOrUndefined","value","undefined","isObject","obj","Array","isArray","isString","arr","isHasOwnProperty","key","hasOwnProperty","lazy","alias","require","rules","TypeError","realPath","String","replace","validateRules","input","language","fieldKey","fieldVal","stackError","splitPipe","split","forEach","rule","getRuleExp","default","msgError","getTranslator","push","currentLng","lang","messages","useValidate","defaultLanguage","useState","msg","setMsg","setValidator","data","message","previousState","Object","entries"],"mappings":"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"}